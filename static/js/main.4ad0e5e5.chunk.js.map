{"version":3,"sources":["fonts/Zpix.ttf","ff/index.js","utils/parser.js","utils/pdf-template.js","app.js","service-worker.js","index.js"],"names":["module","exports","ff","Fanfou","consumerKey","consumerSecret","apiDomain","oauthDomain","protocol","hooks","baseString","string","replace","saveFile","text","filename","blob","Blob","type","FileSaver","saveAs","toTxt","fullList","txt","map","status","name","user","screen_name","item","id","_text","photo","photoTag","originurl","length","time","moment","Date","created_at","local","format","join","toCsv","parsedData","ID","消息内容","图片","时间","delimiter","output","Papa","unparse","header","toLowerCase","toTsv","toJson","JSON","stringify","toMarkdown","query","source_url","source_name","Font","register","family","src","Zpix","styles","StyleSheet","create","body","paddingTop","paddingBottom","paddingHorizontal","fontFamily","margin","fontSize","lineHeight","textAlign","link","color","image","width","marginLeft","marginRight","marginBottom","pageNumber","position","bottom","left","right","StatusText","i","key","String","style","PDFDocument","Fragment","DownloadLink","document","done","fileName","_blob","_url","loading","_error","className","disabled","erroredPages","dataTypes","USER_TIMELINE","FAVORITES","exportTypes","TXT","CSV","TSV","Markdown","PDF","App","state","loged","message","currentPage","pageCount","prevStatusCount","statusCount","exportType","dataType","goAuth","a","getRequestToken","result","localStorage","setItem","oauthTokenSecret","window","location","oauthToken","href","getErroredPages","fetchStatuses","pages","Array","from","v","timelineUri","console","log","async","eachLimit","page","cb","get","count","then","list","previousCount","push","filter","p","setState","catch","error","sort","b","rawid","startAnalyze","statusesCount","statuses_count","favourites_count","Math","ceil","concat","Object","values","checked","value","onChange","onChangeExportType","event","currentTarget","onChangeDataType","doExport","search","this","parsed","queryString","parse","oauth_token","getItem","getAccessToken","removeItem","origin","pathname","maxWidth","alt","profile_image_url","imageRendering","d","m","max","start","end","duration","onClick","reload","fontWeight","target","rel","marginTop","React","Component","Boolean","hostname","test","navigator","serviceWorker","ready","unregister","ReactDOM","render","querySelector"],"mappings":"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","file":"static/js/main.4ad0e5e5.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/Zpix.783bb457.ttf\";","import Fanfou from 'fanfou-sdk-browser';\n\nexport const consumerKey = '7008b986b162eb6ed2db8f50f26bc03e';\nexport const consumerSecret = '0caea751b828756dca59a8ea7330384b';\n\nexport const ff = new Fanfou({\n\tconsumerKey,\n\tconsumerSecret,\n\tapiDomain: 'api.fanfou.com',\n\toauthDomain: 'fanfou.com',\n\tprotocol: 'https:',\n\thooks: {\n\t\tbaseString: (string) => string.replace('https', 'http')\n\t}\n});\n","import moment from 'moment';\nimport Papa from 'papaparse';\nimport FileSaver from 'file-saver';\n\nconst saveFile = (text, filename) => {\n\tconst blob = new Blob([text], {type: 'text/plain;charset=utf-8'});\n\tFileSaver.saveAs(blob, filename);\n};\n\nexport const toTxt = (fullList) => {\n\tconst parsedData = fullList.map((status) => {\n\t\tconst name = `[${status.user.screen_name}]`;\n\t\tlet text = '';\n\n\t\tfor (const item of status.txt) {\n\t\t\tswitch (item.type) {\n\t\t\t\tcase 'at':\n\t\t\t\t\ttext += `${item.text}:${item.id}`;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'link':\n\t\t\t\t\ttext += item.text;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'tag':\n\t\t\t\t\ttext += item._text;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\ttext += item._text;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (status.photo) {\n\t\t\tconst photoTag = `图:${status.photo.originurl}`;\n\t\t\ttext += text.length > 0 ? ` ${photoTag}` : photoTag;\n\t\t}\n\n\t\tconst time = moment(new Date(status.created_at))\n\t\t\t.local()\n\t\t\t.format('YYYY-MM-DD HH:mm:ss');\n\t\tconst line = `${name} ${text} ${time}`;\n\n\t\treturn line;\n\t});\n\tconst txt = parsedData.join('\\n');\n\tsaveFile(txt, 'backup.txt');\n};\n\nexport const toCsv = (fullList, type = 'CSV') => {\n\tconst parsedData = fullList.map((status) => {\n\t\tconst name = status.user.screen_name;\n\t\tconst photo = status.photo ? status.photo.originurl : '';\n\t\tconst time = moment(new Date(status.created_at))\n\t\t\t.local()\n\t\t\t.format('YYYY-MM-DD HH:mm:ss');\n\t\tlet text = '';\n\n\t\tfor (const item of status.txt) {\n\t\t\tswitch (item.type) {\n\t\t\t\tcase 'at':\n\t\t\t\t\ttext += `${item.text}:${item.id}`;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'link':\n\t\t\t\t\ttext += item.text;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'tag':\n\t\t\t\t\ttext += item._text;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\ttext += item._text;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tconst record = {ID: name, 消息内容: text, 图片: photo, 时间: time};\n\n\t\treturn record;\n\t});\n\n\tlet delimiter = ',';\n\tif (type === 'TSV') {\n\t\tdelimiter = '\\t';\n\t}\n\n\tconst output = Papa.unparse(parsedData, {delimiter, header: true});\n\tsaveFile(output, 'backup.' + type.toLowerCase());\n};\n\nexport const toTsv = (fullList) => {\n\ttoCsv(fullList, 'TSV');\n};\n\nexport const toJson = (fullList) => {\n\tconst parsedData = fullList.map((status) => {\n\t\tdelete status.txt;\n\t\tdelete status.user;\n\t\treturn status;\n\t});\n\tconst output = JSON.stringify(parsedData, null, 2);\n\tsaveFile(output, 'backup.json');\n};\n\nexport const toMarkdown = (fullList) => {\n\tconst parsedData = fullList.map((status) => {\n\t\tconst photo = status.photo ? status.photo.originurl : '';\n\t\tconst time = moment(new Date(status.created_at))\n\t\t\t.local()\n\t\t\t.format('YYYY-MM-DD HH:mm:ss');\n\t\tlet text = '';\n\n\t\tfor (const item of status.txt) {\n\t\t\tswitch (item.type) {\n\t\t\t\tcase 'at':\n\t\t\t\t\ttext += `<a href=\"https://fanfou.com/${item.id}\">${item.text}</a>`;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'link':\n\t\t\t\t\ttext += `<a href=\"${item.text}\">${item.text}</a>`;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'tag':\n\t\t\t\t\ttext += `<a href=\"https://fanfou.com/q/${\n\t\t\t\t\t\titem.query\n\t\t\t\t\t}\">${item._text.replace(/\\n/g, ' ')}</a>`;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\ttext += item._text.replace(/\\n/g, ' ');\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tconst block = `| <div>${text}</div>${\n\t\t\tphoto\n\t\t\t\t? `<div align=\"right\"><a href=\"${photo}\"><img width=\"100px\" src=\"${photo}\"/></a></div>`\n\t\t\t\t: ''\n\t\t} <div align=\"right\">${time} 通过 ${\n\t\t\tstatus.source_url\n\t\t\t\t? `<a href=\"${status.source_url}\">${status.source_name}</a>`\n\t\t\t\t: status.source_name\n\t\t}</div> |`;\n\n\t\treturn block;\n\t});\n\n\tconst output = '| 饭否消息备份 |\\n| :-- |\\n' + parsedData.join('\\n');\n\tsaveFile(output, 'backup.md');\n};\n","import React from 'react';\nimport {\n\tPDFDownloadLink,\n\tDocument,\n\tPage,\n\tText,\n\tImage,\n\tLink,\n\tStyleSheet,\n\tFont\n} from '@react-pdf/renderer';\nimport moment from 'moment';\nimport Zpix from '../fonts/Zpix.ttf';\n\nFont.register({family: 'Zpix', src: Zpix});\n\nconst styles = StyleSheet.create({\n\tbody: {\n\t\tpaddingTop: 35,\n\t\tpaddingBottom: 65,\n\t\tpaddingHorizontal: 35,\n\t\tfontFamily: 'Zpix'\n\t},\n\tstatus: {\n\t\tmargin: 5,\n\t\tfontSize: 12\n\t},\n\ttext: {\n\t\tlineHeight: 1.5\n\t},\n\ttime: {\n\t\tfontSize: 12,\n\t\tlineHeight: 1.5,\n\t\ttextAlign: 'right'\n\t},\n\tlink: {\n\t\tcolor: '#00ccff'\n\t},\n\timage: {\n\t\twidth: 100,\n\t\tmarginLeft: 'auto',\n\t\tmarginRight: 0,\n\t\tmarginBottom: 10\n\t},\n\theader: {\n\t\tfontSize: 12,\n\t\tmarginBottom: 20,\n\t\ttextAlign: 'center',\n\t\tcolor: 'grey'\n\t},\n\tpageNumber: {\n\t\tposition: 'absolute',\n\t\tfontSize: 12,\n\t\tbottom: 30,\n\t\tleft: 0,\n\t\tright: 0,\n\t\ttextAlign: 'center',\n\t\tcolor: 'grey'\n\t}\n});\n\nconst StatusText = ({status}) =>\n\tstatus.txt.map((item, i) => {\n\t\tswitch (item.type) {\n\t\t\tcase 'at':\n\t\t\t\treturn (\n\t\t\t\t\t<Link\n\t\t\t\t\t\tkey={`at-${status.id}-${String(i)}`}\n\t\t\t\t\t\tstyle={{...styles.text, ...styles.link}}\n\t\t\t\t\t\tsrc={`https://fanfou.com/${item.id}`}\n\t\t\t\t\t>\n\t\t\t\t\t\t{item.text}\n\t\t\t\t\t</Link>\n\t\t\t\t);\n\t\t\tcase 'link':\n\t\t\t\treturn (\n\t\t\t\t\t<Link\n\t\t\t\t\t\tkey={`link-${status.id}-${String(i)}`}\n\t\t\t\t\t\tstyle={{...styles.text, ...styles.link}}\n\t\t\t\t\t\tsrc={item.text}\n\t\t\t\t\t>\n\t\t\t\t\t\t{item.text}\n\t\t\t\t\t</Link>\n\t\t\t\t);\n\t\t\tcase 'tag':\n\t\t\t\treturn (\n\t\t\t\t\t<Link\n\t\t\t\t\t\tkey={`tag-${status.id}-${String(i)}`}\n\t\t\t\t\t\tstyle={{...styles.text, ...styles.link}}\n\t\t\t\t\t\tsrc={`https://fanfou.com/q/${item.query}`}\n\t\t\t\t\t>\n\t\t\t\t\t\t{item._text.replace(/\\n/g, ' ')}\n\t\t\t\t\t</Link>\n\t\t\t\t);\n\t\t\tdefault:\n\t\t\t\treturn (\n\t\t\t\t\t<Text key={`text-${status.id}-${String(i)}`} style={styles.text}>\n\t\t\t\t\t\t{item.text}\n\t\t\t\t\t</Text>\n\t\t\t\t);\n\t\t}\n\t});\n\nexport const PDFDocument = ({fullList}) => (\n\t<Document>\n\t\t<Page style={styles.body}>\n\t\t\t<Text style={styles.header}>饭否消息备份</Text>\n\t\t\t{fullList.map((status, i) => (\n\t\t\t\t<React.Fragment key={`status-${status.id}-${String(i)}`}>\n\t\t\t\t\t<Text style={styles.status}>\n\t\t\t\t\t\t<StatusText status={status} />\n\t\t\t\t\t</Text>\n\t\t\t\t\t{status.photo && (\n\t\t\t\t\t\t<Link src={status.photo.originurl}>\n\t\t\t\t\t\t\t<Image style={styles.image} src={status.photo.originurl} />\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t)}\n\t\t\t\t\t<Text style={styles.time}>\n\t\t\t\t\t\t通过{' '}\n\t\t\t\t\t\t{status.source_url ? (\n\t\t\t\t\t\t\t<Link style={styles.link} src={status.source_url}>\n\t\t\t\t\t\t\t\t{status.source_name}\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<Text style={styles.link}>{status.source_name}</Text>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Text>\n\t\t\t\t\t<Text style={styles.time}>\n\t\t\t\t\t\t{moment(new Date(status.created_at))\n\t\t\t\t\t\t\t.local()\n\t\t\t\t\t\t\t.format('YYYY-MM-DD HH:mm:ss')}\n\t\t\t\t\t</Text>\n\t\t\t\t</React.Fragment>\n\t\t\t))}\n\t\t</Page>\n\t</Document>\n);\n\nexport const DownloadLink = ({document, done}) => (\n\t<PDFDownloadLink document={document} fileName=\"backup.pdf\">\n\t\t{({_blob, _url, loading, _error}) =>\n\t\t\tdone && !loading ? (\n\t\t\t\t<button className=\"nes-btn is-success\" type=\"button\">\n\t\t\t\t\t导出\n\t\t\t\t</button>\n\t\t\t) : (\n\t\t\t\t<button disabled className=\"nes-btn is-disabled\" type=\"button\">\n\t\t\t\t\t正在生成 PDF\n\t\t\t\t</button>\n\t\t\t)\n\t\t}\n\t</PDFDownloadLink>\n);\n","import React from 'react';\nimport ReactCountup from 'react-countup';\nimport queryString from 'query-string';\nimport async from 'async';\nimport {ff} from './ff';\nimport {toTxt, toCsv, toTsv, toJson, toMarkdown} from './utils/parser';\nimport {PDFDocument, DownloadLink} from './utils/pdf-template';\nimport 'nes.css/css/nes.css';\nimport './app.css';\n\nconst fullList = [];\nlet erroredPages = [];\n\nconst dataTypes = {\n\tUSER_TIMELINE: '消息',\n\tFAVORITES: '收藏'\n};\n\nconst exportTypes = {\n\tTXT: 'TXT',\n\tCSV: 'CSV',\n\tTSV: 'TSV',\n\tJSON: 'JSON',\n\tMarkdown: 'Markdown',\n\tPDF: 'PDF'\n};\n\nclass App extends React.Component {\n\tstate = {\n\t\tloged: false,\n\t\tuser: null,\n\t\tmessage: [],\n\t\tcurrentPage: 0,\n\t\tpageCount: 0,\n\t\tprevStatusCount: 0,\n\t\tstatusCount: 0,\n\t\tdone: false,\n\t\texportType: 'TXT',\n\t\tdataType: '消息'\n\t};\n\n\tasync componentDidMount() {\n\t\tconst {location} = window;\n\t\tif (location && location.search) {\n\t\t\tthis.setState({loged: true});\n\t\t\tconst parsed = queryString.parse(location.search);\n\t\t\tconst {oauth_token: oauthToken} = parsed;\n\t\t\tconst oauthTokenSecret = localStorage.getItem('requestTokenSecret');\n\t\t\tif (oauthTokenSecret) {\n\t\t\t\tconst result = await ff.getAccessToken({oauthToken, oauthTokenSecret});\n\t\t\t\tlocalStorage.setItem('oauthToken', result.oauthToken);\n\t\t\t\tlocalStorage.setItem('oauthTokenSecret', result.oauthTokenSecret);\n\t\t\t\tlocalStorage.removeItem('requestTokenSecret');\n\t\t\t\twindow.location.replace(\n\t\t\t\t\twindow.location.origin + window.location.pathname\n\t\t\t\t);\n\t\t\t}\n\t\t} else {\n\t\t\tconst oauthToken = localStorage.getItem('oauthToken');\n\t\t\tconst oauthTokenSecret = localStorage.getItem('oauthTokenSecret');\n\n\t\t\tif (oauthToken && oauthTokenSecret) {\n\t\t\t\tthis.setState({loged: true});\n\t\t\t\tff.oauthToken = oauthToken;\n\t\t\t\tff.oauthTokenSecret = oauthTokenSecret;\n\t\t\t\tconst user = await ff.get('/users/show');\n\t\t\t\tthis.setState({user});\n\t\t\t}\n\t\t}\n\t}\n\n\tgoAuth = async () => {\n\t\tconst result = await ff.getRequestToken();\n\t\tlocalStorage.setItem('requestTokenSecret', result.oauthTokenSecret);\n\t\twindow.location.replace(\n\t\t\t`https://fanfou.com/oauth/authorize?oauth_token=${result.oauthToken}&oauth_callback=${window.location.href}`\n\t\t);\n\t};\n\n\tgetErroredPages = () => {\n\t\treturn erroredPages;\n\t};\n\n\tfetchStatuses = () => {\n\t\tconst {done, pageCount, dataType} = this.state;\n\t\tconst {USER_TIMELINE, FAVORITES} = dataTypes;\n\n\t\tif (done) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet pages = Array.from({length: pageCount}, (v, i) => i + 1);\n\t\tlet timelineUri = '';\n\n\t\tif (erroredPages.length > 0) {\n\t\t\tpages = erroredPages;\n\t\t\tconsole.log('Retry pages', erroredPages);\n\t\t}\n\n\t\tswitch (dataType) {\n\t\t\tcase USER_TIMELINE:\n\t\t\t\ttimelineUri = '/statuses/user_timeline';\n\t\t\t\tbreak;\n\t\t\tcase FAVORITES:\n\t\t\t\ttimelineUri = '/favorites';\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\treturn;\n\t\t}\n\n\t\tasync.eachLimit(\n\t\t\tpages,\n\t\t\t6,\n\t\t\t(page, cb) => {\n\t\t\t\tff.get(timelineUri, {page, count: 60, format: 'html'})\n\t\t\t\t\t.then((list) => {\n\t\t\t\t\t\tconst previousCount = fullList.length;\n\t\t\t\t\t\tfor (const status of list) {\n\t\t\t\t\t\t\tfullList.push(status);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\terroredPages = this.getErroredPages().filter((p) => p !== page);\n\t\t\t\t\t\tthis.setState(\n\t\t\t\t\t\t\t(state) => ({\n\t\t\t\t\t\t\t\tcurrentPage: state.currentPage + 1,\n\t\t\t\t\t\t\t\tprevStatusCount: previousCount,\n\t\t\t\t\t\t\t\tstatusCount: fullList.length\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\tcb\n\t\t\t\t\t\t);\n\t\t\t\t\t})\n\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\tconsole.error(`Page ${page} errored`, error);\n\t\t\t\t\t\terroredPages.push(page);\n\t\t\t\t\t\tcb();\n\t\t\t\t\t});\n\t\t\t},\n\t\t\t(error) => {\n\t\t\t\tif (error) {\n\t\t\t\t\tconsole.error(error);\n\t\t\t\t}\n\n\t\t\t\tfullList.sort((a, b) => b.rawid - a.rawid);\n\n\t\t\t\tthis.setState({done: this.getErroredPages().length === 0}, () => {\n\t\t\t\t\tthis.fetchStatuses();\n\t\t\t\t});\n\t\t\t}\n\t\t);\n\t};\n\n\tstartAnalyze = () => {\n\t\tconst {user, dataType} = this.state;\n\t\tconst {USER_TIMELINE, FAVORITES} = dataTypes;\n\t\tlet statusesCount = 0;\n\n\t\tswitch (dataType) {\n\t\t\tcase USER_TIMELINE:\n\t\t\t\tstatusesCount = user.statuses_count;\n\t\t\t\tbreak;\n\t\t\tcase FAVORITES:\n\t\t\t\tstatusesCount = user.favourites_count;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\treturn;\n\t\t}\n\n\t\tconst pageCount = Math.ceil(statusesCount / 60);\n\n\t\tthis.setState(\n\t\t\t(state) => ({\n\t\t\t\tmessage: state.message.concat([\n\t\t\t\t\t`你有 ${pageCount} 页预计 ${statusesCount} 条${dataType}待导出，`,\n\t\t\t\t\t`开始获取${dataType}..`\n\t\t\t\t]),\n\t\t\t\tpageCount\n\t\t\t}),\n\t\t\tthis.fetchStatuses\n\t\t);\n\t};\n\n\texportTypes = () => {\n\t\tconst {exportType} = this.state;\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<p>选择导出格式：</p>\n\t\t\t\t<p>\n\t\t\t\t\t{Object.values(exportTypes).map((type) => (\n\t\t\t\t\t\t<label key={type} style={{marginRight: 5}}>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tchecked={exportType === type}\n\t\t\t\t\t\t\t\tvalue={type}\n\t\t\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\t\t\tclassName=\"nes-radio\"\n\t\t\t\t\t\t\t\tname=\"export-type\"\n\t\t\t\t\t\t\t\tonChange={this.onChangeExportType}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<span>{type}</span>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t))}\n\t\t\t\t</p>\n\t\t\t</>\n\t\t);\n\t};\n\n\tonChangeExportType = (event) => {\n\t\tconst {value: exportType} = event.currentTarget;\n\t\tthis.setState({exportType});\n\t};\n\n\tonChangeDataType = (event) => {\n\t\tif (this.state.message.length === 0) {\n\t\t\tconst {value: dataType} = event.currentTarget;\n\t\t\tthis.setState({dataType});\n\t\t}\n\t};\n\n\tdoExport = () => {\n\t\tconst {exportType} = this.state;\n\t\tconst {TXT, CSV, TSV, JSON, Markdown} = exportTypes;\n\n\t\tswitch (exportType) {\n\t\t\tcase TXT:\n\t\t\t\ttoTxt(fullList);\n\t\t\t\tbreak;\n\t\t\tcase CSV:\n\t\t\t\ttoCsv(fullList);\n\t\t\t\tbreak;\n\t\t\tcase TSV:\n\t\t\t\ttoTsv(fullList);\n\t\t\t\tbreak;\n\t\t\tcase JSON:\n\t\t\t\ttoJson(fullList);\n\t\t\t\tbreak;\n\t\t\tcase Markdown:\n\t\t\t\ttoMarkdown(fullList);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\trender() {\n\t\tconst {\n\t\t\tuser,\n\t\t\tloged,\n\t\t\tdataType,\n\t\t\tmessage,\n\t\t\tcurrentPage,\n\t\t\tpageCount,\n\t\t\tprevStatusCount,\n\t\t\tstatusCount,\n\t\t\tdone,\n\t\t\texportType\n\t\t} = this.state;\n\t\tconst {PDF} = exportTypes;\n\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"nes-container with-title is-centered\"\n\t\t\t\t\tstyle={{width: '90vw', maxWidth: 800, margin: '40px auto 20px auto'}}\n\t\t\t\t>\n\t\t\t\t\t<p\n\t\t\t\t\t\tclassName=\"title\"\n\t\t\t\t\t\tstyle={{fontSize: 24, margin: '-3rem auto 1rem'}}\n\t\t\t\t\t>\n\t\t\t\t\t\t饭否消息备份工具\n\t\t\t\t\t</p>\n\n\t\t\t\t\t{user ? (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t你好，\n\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\tclassName=\"nes-avatar is-small\"\n\t\t\t\t\t\t\t\t\talt=\"avatar\"\n\t\t\t\t\t\t\t\t\tsrc={user.profile_image_url}\n\t\t\t\t\t\t\t\t\tstyle={{imageRendering: 'pixelated'}}\n\t\t\t\t\t\t\t\t/>{' '}\n\t\t\t\t\t\t\t\t{user.name}。\n\t\t\t\t\t\t\t</p>\n\n\t\t\t\t\t\t\t<p>选择你要备份的内容：</p>\n\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t{Object.values(dataTypes).map((d) => (\n\t\t\t\t\t\t\t\t\t<label key={d} style={{marginRight: 5}}>\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\tchecked={dataType === d}\n\t\t\t\t\t\t\t\t\t\t\tvalue={d}\n\t\t\t\t\t\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"nes-radio\"\n\t\t\t\t\t\t\t\t\t\t\tname=\"data-type\"\n\t\t\t\t\t\t\t\t\t\t\tonChange={this.onChangeDataType}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<span>{d}</span>\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</p>\n\n\t\t\t\t\t\t\t{message.length > 0 ? (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t{message.map((m, i) => (\n\t\t\t\t\t\t\t\t\t\t<p key={String(i)}>{m}</p>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t<progress\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"nes-progress is-pattern\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={currentPage}\n\t\t\t\t\t\t\t\t\t\t\tmax={pageCount}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t实际已获取{' '}\n\t\t\t\t\t\t\t\t\t\t<ReactCountup\n\t\t\t\t\t\t\t\t\t\t\tstart={prevStatusCount}\n\t\t\t\t\t\t\t\t\t\t\tend={statusCount}\n\t\t\t\t\t\t\t\t\t\t\tduration={done ? 1 : 3}\n\t\t\t\t\t\t\t\t\t\t/>{' '}\n\t\t\t\t\t\t\t\t\t\t条{dataType}。\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t{done && <p>获取完毕。</p>}\n\t\t\t\t\t\t\t\t\t{done && this.exportTypes()}\n\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t{exportType === PDF ? (\n\t\t\t\t\t\t\t\t\t\t\t<DownloadLink\n\t\t\t\t\t\t\t\t\t\t\t\tdone={done}\n\t\t\t\t\t\t\t\t\t\t\t\tdocument={<PDFDocument fullList={fullList} />}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={`nes-btn ${\n\t\t\t\t\t\t\t\t\t\t\t\t\tdone ? 'is-success' : 'is-disabled'\n\t\t\t\t\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={!done}\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={this.doExport}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t导出\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</p>\n\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"nes-btn\"\n\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\t\t\t\t\t\tleft: -4,\n\t\t\t\t\t\t\t\t\t\t\tbottom: -4\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{done ? '返回' : '停止'}\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<p className=\"nes-pointer\" onClick={this.startAnalyze}>\n\t\t\t\t\t\t\t\t\t{'> 点击这里开始备份 <'}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\tclassName=\"nes-btn is-error\"\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\t\t\t\tright: -4,\n\t\t\t\t\t\t\t\t\tbottom: 0\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\tlocalStorage.removeItem('oauthToken');\n\t\t\t\t\t\t\t\t\tlocalStorage.removeItem('oauthTokenSecret');\n\t\t\t\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t退出\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</>\n\t\t\t\t\t) : loged ? (\n\t\t\t\t\t\t<p>正在登录..</p>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\tclassName=\"nes-btn is-primary\"\n\t\t\t\t\t\t\t\tonClick={this.goAuth}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t登录\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t\t<p style={{textAlign: 'center'}}>\n\t\t\t\t\t<span style={{fontWeight: 700}}>{'<'}</span>\n\t\t\t\t\t<span style={{fontWeight: 700, marginLeft: 2}}>{'>'}</span>\n\t\t\t\t\t{' with '}\n\t\t\t\t\t<a\n\t\t\t\t\t\thref=\"https://fanfou.com/lito\"\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\trel=\"noopener noreferrer\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<i\n\t\t\t\t\t\t\tclassName=\"nes-icon is-small heart nes-pointer\"\n\t\t\t\t\t\t\tstyle={{marginTop: -4, marginBottom: -4}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</a>\n\t\t\t\t\t{' on '}\n\t\t\t\t\t<a\n\t\t\t\t\t\thref=\"https://github.com/LitoMore/fanfou-export\"\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\trel=\"noopener noreferrer\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<i\n\t\t\t\t\t\t\tclassName=\"nes-icon github is-small\"\n\t\t\t\t\t\t\tstyle={{marginTop: -4, marginBottom: -4}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</a>\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n\twindow.location.hostname === 'localhost' ||\n\t\t// [::1] is the IPv6 localhost address.\n\t\twindow.location.hostname === '[::1]' ||\n\t\t// 127.0.0.0/8 are considered localhost for IPv4.\n\t\t/^127(?:\\.(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)){3}$/.test(\n\t\t\twindow.location.hostname\n\t\t)\n);\n\nexport function register(config) {\n\tif (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n\t\t// The URL constructor is available in all browsers that support SW.\n\t\tconst publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n\t\tif (publicUrl.origin !== window.location.origin) {\n\t\t\t// Our service worker won't work if PUBLIC_URL is on a different origin\n\t\t\t// from what our page is served on. This might happen if a CDN is used to\n\t\t\t// serve assets; see https://github.com/facebook/create-react-app/issues/2374\n\t\t\treturn;\n\t\t}\n\n\t\twindow.addEventListener('load', async () => {\n\t\t\tconst swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n\t\t\tif (isLocalhost) {\n\t\t\t\t// This is running on localhost. Let's check if a service worker still exists or not.\n\t\t\t\tcheckValidServiceWorker(swUrl, config);\n\n\t\t\t\t// Add some additional logging to localhost, pointing developers to the\n\t\t\t\t// service worker/PWA documentation.\n\t\t\t\tawait navigator.serviceWorker.ready;\n\t\t\t\tconsole.log(\n\t\t\t\t\t'This web app is being served cache-first by a service ' +\n\t\t\t\t\t\t'worker. To learn more, visit https://bit.ly/CRA-PWA'\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\t// Is not localhost. Just register service worker\n\t\t\t\tregisterValidSW(swUrl, config);\n\t\t\t}\n\t\t});\n\t}\n}\n\nasync function registerValidSW(swUrl, config) {\n\ttry {\n\t\tconst registration = await navigator.serviceWorker.register(swUrl);\n\t\tregistration.onupdatefound = () => {\n\t\t\tconst installingWorker = registration.installing;\n\t\t\tif (installingWorker === null) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tinstallingWorker.onstatechange = () => {\n\t\t\t\tif (installingWorker.state === 'installed') {\n\t\t\t\t\tif (navigator.serviceWorker.controller) {\n\t\t\t\t\t\t// At this point, the updated precached content has been fetched,\n\t\t\t\t\t\t// but the previous service worker will still serve the older\n\t\t\t\t\t\t// content until all client tabs are closed.\n\t\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t\t'New content is available and will be used when all ' +\n\t\t\t\t\t\t\t\t'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\t// Execute callback\n\t\t\t\t\t\tif (config && config.onUpdate) {\n\t\t\t\t\t\t\tconfig.onUpdate(registration);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// At this point, everything has been precached.\n\t\t\t\t\t\t// It's the perfect time to display a\n\t\t\t\t\t\t// \"Content is cached for offline use.\" message.\n\t\t\t\t\t\tconsole.log('Content is cached for offline use.');\n\n\t\t\t\t\t\t// Execute callback\n\t\t\t\t\t\tif (config && config.onSuccess) {\n\t\t\t\t\t\t\tconfig.onSuccess(registration);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t};\n\t} catch (error) {\n\t\tconsole.error('Error during service worker registration:', error);\n\t}\n}\n\nasync function checkValidServiceWorker(swUrl, config) {\n\ttry {\n\t\t// Check if the service worker can be found. If it can't reload the page.\n\t\tconst response = await fetch(swUrl, {\n\t\t\theaders: {'Service-Worker': 'script'}\n\t\t});\n\t\t// Ensure service worker exists, and that we really are getting a JS file.\n\t\tconst contentType = response.headers.get('content-type');\n\t\tif (\n\t\t\tresponse.status === 404 ||\n\t\t\t(contentType !== null && !contentType.includes('javascript'))\n\t\t) {\n\t\t\t// No service worker found. Probably a different app. Reload the page.\n\t\t\tconst registration = await navigator.serviceWorker.ready;\n\t\t\tawait registration.unregister();\n\t\t\twindow.location.reload();\n\t\t} else {\n\t\t\t// Service worker found. Proceed as normal.\n\t\t\tregisterValidSW(swUrl, config);\n\t\t}\n\t} catch {\n\t\tconsole.log(\n\t\t\t'No internet connection found. App is running in offline mode.'\n\t\t);\n\t}\n}\n\nexport async function unregister() {\n\tif ('serviceWorker' in navigator) {\n\t\tconst registration = await navigator.serviceWorker.ready;\n\t\tregistration.unregister();\n\t}\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './app';\nimport * as serviceWorker from './service-worker';\n\nReactDOM.render(<App />, document.querySelector('#root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}